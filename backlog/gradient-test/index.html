<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Gradient Playground</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#1a1a2e;--surface:#16213e;
  --accent:#e94560;--text:#eee;--text2:#b8b8cc;--text3:rgba(255,255,255,0.35);
  --border:rgba(255,255,255,0.08);--r:12px;
  --vk:#0077FF;--tg:#2EC6D1;--yandex:#FC3F1D;
}
body{
  min-height:100vh;
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;
  background:linear-gradient(160deg,hsl(240,30%,12%) 0%,hsl(225,35%,8%) 50%,hsl(260,20%,10%) 100%);
  color:var(--text);display:flex;-webkit-font-smoothing:antialiased;
}
body::before{
  content:'';position:fixed;top:0;left:0;right:0;bottom:0;pointer-events:none;
  background:radial-gradient(ellipse at 30% 0%,rgba(233,69,96,0.06) 0%,transparent 50%),
             radial-gradient(ellipse at 80% 100%,rgba(46,198,209,0.04) 0%,transparent 50%);
}

/* === CONTROLS === */
.controls{
  width:320px;flex-shrink:0;padding:24px;
  border-right:1px solid rgba(255,255,255,0.06);
  overflow-y:auto;height:100vh;position:sticky;top:0;
  z-index:1;
}
.controls h2{font-size:16px;font-weight:700;margin-bottom:16px}

.ctrl-group{margin-bottom:20px}
.ctrl-label{font-size:11px;color:#888;text-transform:uppercase;letter-spacing:.6px;font-weight:600;margin-bottom:8px}

.ctrl-row{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.ctrl-row label{font-size:12px;color:var(--text2);min-width:60px}
.ctrl-row input[type="range"]{flex:1;accent-color:var(--vk);height:4px}
.ctrl-row .val{font-size:12px;color:var(--vk);font-weight:600;min-width:40px;text-align:right;font-family:'SF Mono',Monaco,Consolas,monospace}

.radio-row{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:10px}
.radio-pill{
  padding:6px 12px;font-size:12px;font-weight:500;
  color:var(--text2);background:rgba(255,255,255,0.04);
  border:1px solid var(--border);border-radius:100px;
  cursor:pointer;transition:all 0.15s ease;
}
.radio-pill:hover{background:rgba(255,255,255,0.08);border-color:rgba(255,255,255,0.15)}
.radio-pill.active{color:var(--vk);background:rgba(0,119,255,0.15);border-color:rgba(0,119,255,0.5)}

.color-row{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.color-row label{font-size:12px;color:var(--text2);min-width:70px}
.color-row input[type="color"]{
  width:32px;height:24px;border:1px solid var(--border);border-radius:4px;
  background:none;cursor:pointer;padding:0;
}
.color-row input[type="color"]::-webkit-color-swatch-wrapper{padding:1px}
.color-row input[type="color"]::-webkit-color-swatch{border:none;border-radius:2px}

.css-output{
  margin-top:16px;padding:10px;
  background:rgba(0,0,0,0.3);border:1px solid var(--border);border-radius:8px;
  font-family:'SF Mono',Monaco,Consolas,monospace;font-size:11px;
  color:var(--tg);line-height:1.5;word-break:break-all;
  max-height:160px;overflow-y:auto;
}
.css-output span{color:var(--text3)}

.btn-copy{
  margin-top:8px;padding:6px 14px;
  background:rgba(0,119,255,0.15);border:1px solid rgba(0,119,255,0.4);
  border-radius:6px;color:var(--vk);font-size:12px;font-weight:500;
  cursor:pointer;transition:all 0.15s ease;
}
.btn-copy:hover{background:rgba(0,119,255,0.25)}

.section-toggle{
  display:flex;align-items:center;gap:8px;margin-bottom:12px;cursor:pointer;
}
.section-toggle input{accent-color:var(--vk)}
.section-toggle span{font-size:12px;color:var(--text2)}

/* === PREVIEW === */
.preview-area{
  flex:1;display:flex;align-items:flex-start;justify-content:center;
  padding:32px;min-height:100vh;position:relative;
}
.preview-frame{
  width:420px;border-radius:16px;overflow:hidden;
  box-shadow:0 20px 60px rgba(0,0,0,0.5),0 0 0 1px rgba(255,255,255,0.06);
  position:sticky;top:32px;
}

/* Popup mock */
.popup{
  background:linear-gradient(160deg,hsl(240,30%,12%) 0%,hsl(225,35%,8%) 50%,hsl(260,20%,10%) 100%);
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;
  color:var(--text);max-height:680px;overflow-y:auto;position:relative;
}
.popup::before{
  content:'';position:absolute;top:0;left:0;right:0;bottom:0;pointer-events:none;
  background:radial-gradient(ellipse at 30% 0%,rgba(233,69,96,0.06) 0%,transparent 50%),
             radial-gradient(ellipse at 80% 100%,rgba(46,198,209,0.04) 0%,transparent 50%);
}
.ad-form{padding:16px;display:flex;flex-direction:column;gap:14px;position:relative;z-index:1}
.ad-section{
  background:var(--surface);border-radius:var(--r);padding:12px 14px;
  border:1px solid transparent;
  background:linear-gradient(var(--surface),var(--surface)) padding-box,
    linear-gradient(135deg,rgba(0,119,255,0.2),rgba(233,69,96,0.15),rgba(46,198,209,0.2)) border-box;
  box-shadow:inset 0 0 0.5px 1px hsla(0,0%,100%,0.04),0 0 0 1px hsla(0,0%,0%,0.1),0 1px 3px hsla(0,0%,0%,0.15),0 6px 16px hsla(0,0%,0%,0.12);
}
.ad-section h3{font-size:11px;text-transform:uppercase;letter-spacing:.6px;margin-bottom:10px;font-weight:600}
.ad-header-row{display:flex;align-items:center;gap:10px}
.ad-header-row h1{font-size:18px;font-weight:600;letter-spacing:-0.01em}
.header-right{margin-left:auto}
.icon-btn{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:none;border:1px solid transparent;border-radius:8px;color:var(--text2);cursor:pointer}

.platform-group{padding-bottom:10px;margin-bottom:10px;border-bottom:1px solid var(--border)}
.platform-group:last-child{padding-bottom:0;margin-bottom:0;border-bottom:none}
.platform-group-title{font-size:11px;font-weight:600;margin-bottom:8px;display:flex;align-items:center;gap:5px}
.platform-group-title .dot{width:6px;height:6px;border-radius:50%;flex-shrink:0}
.cb-grid{display:flex;flex-wrap:wrap;gap:6px}
.cb-pill{padding:6px 14px;font-size:12px;font-weight:500;color:var(--text2);background:rgba(255,255,255,0.04);border:1px solid var(--border);border-radius:100px}
.cb-pill.on[data-p="vk"]{color:var(--vk);background:rgba(0,119,255,0.15);border-color:rgba(0,119,255,0.5)}
.cb-pill.on[data-p="yandex"]{color:var(--yandex);background:rgba(252,63,29,0.15);border-color:rgba(252,63,29,0.5)}
.cb-pill.on[data-p="tg"]{color:var(--tg);background:rgba(46,198,209,0.15);border-color:rgba(46,198,209,0.5)}

.style-selector{display:flex;position:relative;background:rgba(255,255,255,0.06);border-radius:10px;padding:3px}
.style-selector label{flex:1;text-align:center;padding:8px 0;font-size:12px;font-weight:500;color:var(--text2);border-radius:7px}
.style-selector label.active{color:var(--text)}
.style-indicator{position:absolute;top:3px;bottom:3px;left:calc(33.33% + 3px);width:calc(33.33% - 6px);background:rgba(255,255,255,0.1);border-radius:7px;pointer-events:none}

textarea.desc{width:100%;padding:10px 12px;background:var(--bg);border:1px solid var(--border);border-radius:8px;color:var(--text);font-size:13px;font-family:inherit;resize:none;height:64px;line-height:1.4}
textarea.desc::placeholder{color:var(--text3)}

.ad-actions{display:flex;gap:10px;align-items:center}
.selected-count{font-size:11px;color:var(--text2);font-weight:500}
#generateBtn{flex:1;padding:10px 16px;background:linear-gradient(135deg,#e94560 0%,#d63384 50%,#c73a52 100%);color:#fff;border:none;border-radius:var(--r);font-size:13px;font-weight:600;cursor:pointer;box-shadow:0 0 20px rgba(233,69,96,0.25),0 0 60px rgba(233,69,96,0.1)}
</style>
</head>
<body>

<div class="controls">
  <h2>Gradient Playground</h2>

  <!-- Title gradient -->
  <div class="ctrl-group">
    <div class="ctrl-label">Заголовок «TextGen»</div>

    <div class="ctrl-label" style="color:var(--text2);font-size:12px;text-transform:none;letter-spacing:0;margin-bottom:6px">Тип</div>
    <div class="radio-row" id="titleType">
      <div class="radio-pill active" data-val="linear">Linear</div>
      <div class="radio-pill" data-val="radial">Radial</div>
      <div class="radio-pill" data-val="conic">Conic</div>
      <div class="radio-pill" data-val="none">Без</div>
    </div>

    <div id="titleLinearCtrls">
      <div class="ctrl-row">
        <label>Угол</label>
        <input type="range" id="titleAngle" min="0" max="360" value="90">
        <span class="val" id="titleAngleVal">90°</span>
      </div>
    </div>

    <div id="titleRadialCtrls" style="display:none">
      <div class="ctrl-row">
        <label>Центр X</label>
        <input type="range" id="titleRx" min="0" max="100" value="30">
        <span class="val" id="titleRxVal">30%</span>
      </div>
      <div class="ctrl-row">
        <label>Центр Y</label>
        <input type="range" id="titleRy" min="0" max="100" value="50">
        <span class="val" id="titleRyVal">50%</span>
      </div>
    </div>

    <div id="titleConicCtrls" style="display:none">
      <div class="ctrl-row">
        <label>Старт</label>
        <input type="range" id="titleConic" min="0" max="360" value="180">
        <span class="val" id="titleConicVal">180°</span>
      </div>
    </div>

    <div class="ctrl-row">
      <label>White stop</label>
      <input type="range" id="titleStop" min="0" max="100" value="20">
      <span class="val" id="titleStopVal">20%</span>
    </div>

    <div class="ctrl-row">
      <label>Blue opacity</label>
      <input type="range" id="titleOpacity" min="0" max="100" value="70">
      <span class="val" id="titleOpacityVal">0.7</span>
    </div>

    <div class="color-row">
      <label>Цвет 1</label>
      <input type="color" id="titleColor1" value="#ffffff">
    </div>
    <div class="color-row">
      <label>Цвет 2</label>
      <input type="color" id="titleColor2" value="#0077ff">
    </div>
  </div>

  <!-- Section headers -->
  <div class="ctrl-group">
    <div class="section-toggle">
      <input type="checkbox" id="sectionEnabled" checked>
      <span>Секции (ПЛОЩАДКИ, СТИЛЬ...)</span>
    </div>

    <div id="sectionCtrls">
      <div class="ctrl-label" style="color:var(--text2);font-size:12px;text-transform:none;letter-spacing:0;margin-bottom:6px">Тип</div>
      <div class="radio-row" id="sectionType">
        <div class="radio-pill active" data-val="linear">Linear</div>
        <div class="radio-pill" data-val="radial">Radial</div>
        <div class="radio-pill" data-val="none">Без</div>
      </div>

      <div id="sectionLinearCtrls">
        <div class="ctrl-row">
          <label>Угол</label>
          <input type="range" id="sectionAngle" min="0" max="360" value="90">
          <span class="val" id="sectionAngleVal">90°</span>
        </div>
      </div>

      <div id="sectionRadialCtrls" style="display:none">
        <div class="ctrl-row">
          <label>Центр X</label>
          <input type="range" id="sectionRx" min="0" max="100" value="20">
          <span class="val" id="sectionRxVal">20%</span>
        </div>
      </div>

      <div class="ctrl-row">
        <label>Opacity 1</label>
        <input type="range" id="sectionOp1" min="0" max="100" value="40">
        <span class="val" id="sectionOp1Val">0.4</span>
      </div>
      <div class="ctrl-row">
        <label>Opacity 2</label>
        <input type="range" id="sectionOp2" min="0" max="100" value="40">
        <span class="val" id="sectionOp2Val">0.4</span>
      </div>
    </div>
  </div>

  <!-- Output -->
  <div class="ctrl-group">
    <div class="ctrl-label">CSS</div>
    <div class="css-output" id="cssOutput"></div>
    <button class="btn-copy" id="btnCopy">Скопировать CSS</button>
  </div>
</div>

<!-- Preview -->
<div class="preview-area">
  <div class="preview-frame">
    <div class="popup">
      <div class="ad-form">
        <div class="ad-section">
          <div class="ad-header-row">
            <img src="../../chrome-extension/hh-logo.png" alt="HH" style="width:22px;height:22px;border-radius:50%;flex-shrink:0">
            <h1 id="previewTitle">TextGen</h1>
            <div class="header-right">
              <button class="icon-btn"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M4 21v-7m0-4V3m8 18v-9m0-4V3m8 18v-5m0-4V3M2 14h4m4-6h4m4 8h4"/></svg></button>
            </div>
          </div>
        </div>

        <div class="ad-section">
          <h3 class="sh">Площадки</h3>
          <div class="platform-group">
            <div class="platform-group-title" style="color:var(--vk)"><span class="dot" style="background:var(--vk)"></span> VK</div>
            <div class="cb-grid">
              <span class="cb-pill on" data-p="vk">Универсальная</span>
              <span class="cb-pill" data-p="vk">Сайт</span>
              <span class="cb-pill on" data-p="vk">Лид-формы</span>
              <span class="cb-pill" data-p="vk">Карусель</span>
            </div>
          </div>
          <div class="platform-group">
            <div class="platform-group-title" style="color:var(--yandex)"><span class="dot" style="background:var(--yandex)"></span> Яндекс.Директ</div>
            <div class="cb-grid">
              <span class="cb-pill" data-p="yandex">Поиск</span>
              <span class="cb-pill on" data-p="yandex">РСЯ</span>
            </div>
          </div>
          <div class="platform-group">
            <div class="platform-group-title" style="color:var(--tg)"><span class="dot" style="background:var(--tg)"></span> Telegram</div>
            <div class="cb-grid">
              <span class="cb-pill on" data-p="tg">Посевы</span>
              <span class="cb-pill" data-p="tg">TGads</span>
            </div>
          </div>
        </div>

        <div class="ad-section">
          <h3 class="sh">Стиль</h3>
          <div class="style-selector">
            <label>Креативный</label>
            <label class="active">Сбалансированный</label>
            <label>Формальный</label>
            <div class="style-indicator"></div>
          </div>
        </div>

        <div class="ad-section">
          <h3 class="sh">Описание вакансии / контекст</h3>
          <textarea class="desc" placeholder="Опишите вакансию..." readonly>Кладовщик-комплектовщик, Алабино, от 110К</textarea>
        </div>

        <div class="ad-actions">
          <span class="selected-count">Выбрано: 5</span>
          <button id="generateBtn">Сгенерировать</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const $ = s => document.querySelector(s);
const $$ = s => document.querySelectorAll(s);

const title = $('#previewTitle');
const sections = $$('.sh');

// State
let state = {
  title: { type:'linear', angle:90, rx:30, ry:50, conic:180, stop:20, opacity:70, color1:'#ffffff', color2:'#0077ff' },
  section: { enabled:true, type:'linear', angle:90, rx:20, op1:40, op2:40 }
};

function hexToRgb(hex) {
  const r = parseInt(hex.slice(1,3),16);
  const g = parseInt(hex.slice(3,5),16);
  const b = parseInt(hex.slice(5,7),16);
  return `${r},${g},${b}`;
}

function buildGradient(cfg, isSection) {
  const rgb2 = hexToRgb(cfg.color2 || state.title.color2);
  const rgb1 = hexToRgb(cfg.color1 || state.title.color1);

  let c1, c2;
  if (isSection) {
    c1 = `rgba(${rgb1},${cfg.op1/100})`;
    c2 = `rgba(${rgb2},${cfg.op2/100})`;
  } else {
    c1 = cfg.color1 || '#ffffff';
    c2 = `rgba(${rgb2},${cfg.opacity/100})`;
  }

  const stop = isSection ? '' : ` ${cfg.stop}%`;

  if (cfg.type === 'linear') {
    return `linear-gradient(${cfg.angle}deg, ${c1}${stop}, ${c2})`;
  } else if (cfg.type === 'radial') {
    const rx = isSection ? cfg.rx : cfg.rx;
    const ry = isSection ? 50 : cfg.ry;
    return `radial-gradient(ellipse at ${rx}% ${ry}%, ${c1}${stop}, ${c2})`;
  } else if (cfg.type === 'conic') {
    return `conic-gradient(from ${cfg.conic}deg at 50% 60%, ${c1}, ${c2}, ${c1})`;
  }
  return 'none';
}

function applyGradientText(el, gradient) {
  if (gradient === 'none') {
    el.style.background = '';
    el.style.webkitBackgroundClip = '';
    el.style.webkitTextFillColor = '';
    el.style.backgroundClip = '';
    return;
  }
  el.style.background = gradient;
  el.style.webkitBackgroundClip = 'text';
  el.style.webkitTextFillColor = 'transparent';
  el.style.backgroundClip = 'text';
}

function update() {
  // Title
  if (state.title.type === 'none') {
    title.style.background = '';
    title.style.webkitBackgroundClip = '';
    title.style.webkitTextFillColor = '';
    title.style.backgroundClip = '';
    title.style.color = '#fff';
  } else {
    title.style.color = '';
    const g = buildGradient(state.title, false);
    applyGradientText(title, g);
  }

  // Sections
  sections.forEach(el => {
    if (!state.section.enabled || state.section.type === 'none') {
      el.style.background = '';
      el.style.webkitBackgroundClip = '';
      el.style.webkitTextFillColor = '';
      el.style.backgroundClip = '';
      el.style.color = 'var(--text3)';
    } else {
      el.style.color = '';
      const sc = { ...state.section, color1: state.title.color1, color2: state.title.color2 };
      const g = buildGradient(sc, true);
      applyGradientText(el, g);
    }
  });

  // CSS output
  updateCSS();
}

function updateCSS() {
  let css = '';
  if (state.title.type !== 'none') {
    const g = buildGradient(state.title, false);
    css += `.ad-header-row h1 {\n  background: ${g};\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}`;
  }
  if (state.section.enabled && state.section.type !== 'none') {
    const sc = { ...state.section, color1: state.title.color1, color2: state.title.color2 };
    const g = buildGradient(sc, true);
    css += `\n\n.ad-section h3 {\n  background: ${g};\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}`;
  }
  $('#cssOutput').textContent = css || '/* no gradient */';
}

// --- Wire up controls ---

// Radio pills
function setupRadio(containerId, stateKey, parentKey) {
  const pills = $$(`#${containerId} .radio-pill`);
  pills.forEach(p => {
    p.addEventListener('click', () => {
      pills.forEach(x => x.classList.remove('active'));
      p.classList.add('active');
      state[parentKey].type = p.dataset.val;

      if (parentKey === 'title') {
        $('#titleLinearCtrls').style.display = p.dataset.val === 'linear' ? '' : 'none';
        $('#titleRadialCtrls').style.display = p.dataset.val === 'radial' ? '' : 'none';
        $('#titleConicCtrls').style.display = p.dataset.val === 'conic' ? '' : 'none';
      }
      if (parentKey === 'section') {
        $('#sectionLinearCtrls').style.display = p.dataset.val === 'linear' ? '' : 'none';
        $('#sectionRadialCtrls').style.display = p.dataset.val === 'radial' ? '' : 'none';
      }
      update();
    });
  });
}
setupRadio('titleType', 'type', 'title');
setupRadio('sectionType', 'type', 'section');

// Sliders
function wire(id, stateParent, stateKey, valId, fmt) {
  const input = $(`#${id}`);
  const val = $(`#${valId}`);
  input.addEventListener('input', () => {
    state[stateParent][stateKey] = +input.value;
    val.textContent = fmt(+input.value);
    update();
  });
}
wire('titleAngle','title','angle','titleAngleVal', v => v+'°');
wire('titleStop','title','stop','titleStopVal', v => v+'%');
wire('titleOpacity','title','opacity','titleOpacityVal', v => (v/100).toFixed(2));
wire('titleRx','title','rx','titleRxVal', v => v+'%');
wire('titleRy','title','ry','titleRyVal', v => v+'%');
wire('titleConic','title','conic','titleConicVal', v => v+'°');
wire('sectionAngle','section','angle','sectionAngleVal', v => v+'°');
wire('sectionRx','section','rx','sectionRxVal', v => v+'%');
wire('sectionOp1','section','op1','sectionOp1Val', v => (v/100).toFixed(2));
wire('sectionOp2','section','op2','sectionOp2Val', v => (v/100).toFixed(2));

// Colors
$('#titleColor1').addEventListener('input', e => { state.title.color1 = e.target.value; update(); });
$('#titleColor2').addEventListener('input', e => { state.title.color2 = e.target.value; update(); });

// Section toggle
$('#sectionEnabled').addEventListener('change', e => { state.section.enabled = e.target.checked; update(); });

// Copy
$('#btnCopy').addEventListener('click', () => {
  navigator.clipboard.writeText($('#cssOutput').textContent);
  $('#btnCopy').textContent = 'Скопировано!';
  setTimeout(() => $('#btnCopy').textContent = 'Скопировать CSS', 1500);
});

// Init
update();
</script>
</body>
</html>
