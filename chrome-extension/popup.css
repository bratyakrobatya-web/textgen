*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0c0c14;
  --surface:rgba(255,255,255,0.03);
  --surface-hover:rgba(255,255,255,0.05);
  --accent:#6C63FF;
  --accent-dim:rgba(108,99,255,0.10);
  --accent-border:rgba(108,99,255,0.30);
  --accent-glow:rgba(108,99,255,0.25);
  --text:#e8e8f0;
  --text2:rgba(255,255,255,0.45);
  --text3:rgba(255,255,255,0.25);
  --green:#4ade80;
  --green-dim:rgba(74,222,128,0.08);
  --green-border:rgba(74,222,128,0.25);
  --yellow:#facc15;
  --r:12px;
  --r-sm:8px;
  --r-pill:100px;
  --border:rgba(255,255,255,0.07);
  --border-hover:rgba(255,255,255,0.13);
  --blur:20px;
  --ease:cubic-bezier(0.16,1,0.3,1);
  --ease-std:cubic-bezier(0.4,0,0.2,1);
  --dur:150ms;
  --dur-slow:300ms;
  --vk:#5B9BFF;
  --vk-dim:rgba(0,119,255,0.08);
  --vk-border:rgba(0,119,255,0.25);
  --yandex:#FF7A5C;
  --yandex-dim:rgba(252,63,29,0.08);
  --yandex-border:rgba(252,63,29,0.25);
  --tg:#5DD8E0;
  --tg-dim:rgba(46,198,209,0.08);
  --tg-border:rgba(46,198,209,0.25);
}

body{
  height:100vh;max-width:802px;margin:0 auto;
  font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);display:flex;flex-direction:column;
  -webkit-font-smoothing:antialiased;position:relative;
}

/* Ambient glow â€” Wrap preset */
body::before{
  content:'';position:fixed;top:0;left:0;right:0;bottom:0;pointer-events:none;
  background:
    radial-gradient(ellipse 54% 46% at 30% 0%, rgba(108,99,255,0.13) 0%, transparent 95%),
    radial-gradient(ellipse 42% 38% at 70% 100%, rgba(108,99,255,0.13) 0%, transparent 95%);
}

/* Scrollbar */
::-webkit-scrollbar{width:4px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:rgba(108,99,255,0.2);border-radius:4px}
::-webkit-scrollbar-thumb:hover{background:rgba(108,99,255,0.35)}

:focus{outline:none}
:focus-visible{outline:none;box-shadow:0 0 0 2px var(--bg),0 0 0 4px var(--accent);border-radius:var(--r-sm)}
::selection{background:rgba(108,99,255,0.25);color:#fff}

/* === HEADER === */
.ad-header-row{display:flex;align-items:center;gap:10px}
.ad-header-row h1{font-size:22px;font-weight:600;letter-spacing:-0.02em;color:var(--text)}
.header-right{margin-left:auto;display:flex;align-items:center;gap:6px}
.icon-btn{
  display:flex;align-items:center;justify-content:center;
  width:32px;height:32px;
  background:none;border:1px solid transparent;border-radius:var(--r-sm);
  color:var(--text3);cursor:pointer;
  transition:all var(--dur) ease;
}
.icon-btn:hover{background:rgba(255,255,255,0.05);color:var(--text2);border-color:var(--border)}
.icon-btn:active{transform:scale(0.93);transition-duration:60ms}
.icon-btn svg{flex-shrink:0}

/* === SETTINGS === */
.settings{
  display:grid;grid-template-rows:0fr;
  transition:grid-template-rows var(--dur-slow) ease-out;
}
.settings.open{grid-template-rows:1fr}
.settings-inner{overflow:hidden}
.settings-content{padding:12px 0 0;border-top:1px solid var(--border)}
.settings-content label{display:block;font-size:13px;color:var(--text2);margin-bottom:3px}
.settings-content input,.settings-content select{
  width:100%;padding:9px 11px;
  background:rgba(255,255,255,0.03);
  border:1px solid var(--border);
  border-radius:var(--r-sm);color:var(--text);font-size:13px;
  font-family:inherit;margin-bottom:10px;
  backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
  transition:border-color var(--dur) ease,box-shadow var(--dur) ease;
}
.settings-content input:hover,.settings-content select:hover{border-color:var(--border-hover)}
.settings-content input:focus,.settings-content select:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-dim)}
.settings-content select{
  appearance:none;cursor:pointer;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath d='M3 5l3 3 3-3' stroke='%23666' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:right 10px center;padding-right:30px;
  background-color:rgba(255,255,255,0.03);
}
.ts{color:var(--green);font-size:9px;display:none;margin-left:6px;animation:fadeIn 0.2s ease-out}
.parser-mode-group{display:flex;gap:0;margin-bottom:10px;border:1px solid var(--border);border-radius:var(--r-sm);overflow:hidden}
.parser-mode-btn{
  flex:1;padding:7px 6px;font-size:12px;font-family:inherit;
  background:rgba(255,255,255,0.02);color:var(--text3);
  border:none;cursor:pointer;transition:all 0.2s ease;white-space:nowrap;
}
.parser-mode-btn:not(:last-child){border-right:1px solid var(--border)}
.parser-mode-btn:hover{background:rgba(255,255,255,0.04);color:var(--text2)}
.parser-mode-btn.active{background:var(--accent-dim);color:var(--accent);font-weight:500}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

/* === AD TEXTS MODE === */
.ad-form{padding:13px;overflow-y:auto;flex:1;min-height:0;display:flex;flex-direction:column;gap:12px;position:relative;z-index:1}

/* Glass sections */
.ad-section{
  background:var(--surface);
  backdrop-filter:blur(var(--blur));-webkit-backdrop-filter:blur(var(--blur));
  border:1px solid var(--border);
  border-radius:var(--r);padding:12px 14px;
  transition:border-color var(--dur) ease;
}
.ad-section:hover{border-color:var(--border-hover)}
.ad-section h3{
  font-size:11px;color:rgba(255,255,255,0.50);text-transform:uppercase;
  letter-spacing:1px;margin-bottom:10px;font-weight:600;
}

/* Platform groups */
.platform-group{padding-bottom:8px;margin-bottom:8px}
.platform-group:last-child{padding-bottom:0;margin-bottom:0}
.platform-group-title{
  font-size:13px;font-weight:600;margin-bottom:8px;
  display:flex;align-items:center;gap:5px;color:var(--text2);
}
.platform-group-title .dot{width:5px;height:5px;border-radius:50%;flex-shrink:0}
.platform-group-title[data-platform="vk"]{color:var(--vk)}
.platform-group-title[data-platform="vk"] .dot{background:var(--vk)}
.platform-group-title[data-platform="yandex"]{color:var(--yandex)}
.platform-group-title[data-platform="yandex"] .dot{background:var(--yandex)}
.platform-group-title[data-platform="tg"]{color:var(--tg)}
.platform-group-title[data-platform="tg"] .dot{background:var(--tg)}

/* Pill checkboxes */
.cb-grid{display:flex;flex-wrap:wrap;gap:6px}
.cb-pill{
  display:inline-flex;align-items:center;
  padding:7px 16px;font-size:13px;font-weight:500;
  color:var(--text3);background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.06);border-radius:var(--r-pill);
  cursor:pointer;user-select:none;
  transition:all 0.2s cubic-bezier(0.25,0.8,0.25,1);
}
.cb-pill input{position:absolute;opacity:0;pointer-events:none}
.cb-pill:hover{background:rgba(255,255,255,0.04);border-color:var(--border-hover);color:var(--text2)}
.cb-pill:active{transform:translateY(0) scale(0.97);transition-duration:80ms}
.cb-pill.checked{color:var(--accent);background:var(--accent-dim);border-color:var(--accent-border)}
.cb-pill[data-platform="vk"].checked{color:var(--vk);background:var(--vk-dim);border-color:var(--vk-border)}
.cb-pill[data-platform="yandex"].checked{color:var(--yandex);background:var(--yandex-dim);border-color:var(--yandex-border)}
.cb-pill[data-platform="tg"].checked{color:var(--tg);background:var(--tg-dim);border-color:var(--tg-border)}

/* Style selector */
.style-selector{
  display:flex;position:relative;
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:10px;padding:3px;
}
.style-selector input[type="radio"]{position:absolute;opacity:0;pointer-events:none}
.style-selector label{
  flex:1;text-align:center;padding:8px 0;
  font-size:13px;font-weight:500;color:var(--text3);
  cursor:pointer;z-index:1;border-radius:7px;user-select:none;
  transition:all 0.25s ease;border:1px solid transparent;
}
.style-selector label:hover{color:var(--text2)}
.style-selector input:checked+label{
  color:var(--text);
  background:rgba(108,99,255,0.10);
  border-color:rgba(108,99,255,0.18);
}
/* Textarea */
#adDescription{
  width:100%;padding:10px 12px;
  background:rgba(255,255,255,0.02);
  border:1px solid var(--border);
  border-radius:var(--r-sm);color:var(--text);font-size:13px;
  font-family:inherit;resize:none;min-height:80px;max-height:60vh;line-height:1.5;
  overflow-y:auto;
  backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
  transition:border-color var(--dur) ease,box-shadow var(--dur) ease;
}
#adDescription:hover{border-color:var(--border-hover)}
#adDescription:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-dim)}
#adDescription::placeholder{color:var(--text3)}
#adDescription:focus::placeholder{color:rgba(255,255,255,0.15);transition:color 0.3s ease}
.desc-wrap{position:relative}
.desc-clear{
  position:absolute;top:6px;right:6px;
  width:22px;height:22px;padding:0;
  display:flex;align-items:center;justify-content:center;
  background:rgba(255,255,255,0.04);border:1px solid var(--border);
  border-radius:4px;color:var(--text3);cursor:pointer;
  transition:all 0.15s ease;
}
.desc-clear:hover{background:rgba(108,99,255,0.12);border-color:var(--accent-border);color:var(--accent)}
.desc-clear:active{transform:scale(0.9)}

/* Actions */
.ad-actions{display:flex;gap:10px;align-items:center}

/* Generate button */
#generateBtn{
  flex:1;padding:10px;
  background:var(--accent);
  color:#fff;border:none;border-radius:var(--r);
  font-size:15px;font-weight:600;cursor:pointer;
  position:relative;overflow:hidden;
  box-shadow:0 0 24px var(--accent-glow),0 0 64px rgba(108,99,255,0.08);
  transition:all 0.15s ease;
}
#generateBtn:hover{
  box-shadow:0 4px 28px rgba(108,99,255,0.4),0 0 64px rgba(108,99,255,0.12);
  transform:translateY(-1px);filter:brightness(1.1);
}
#generateBtn:active{transform:translateY(0) scale(0.98)}
#generateBtn:disabled{opacity:.4;cursor:not-allowed;filter:saturate(0.3);transform:none;box-shadow:none}
#generateBtn.loading{color:transparent;pointer-events:none}
#generateBtn.loading::after{
  content:'';position:absolute;top:50%;left:50%;
  width:18px;height:18px;margin:-9px 0 0 -9px;
  border:2px solid rgba(255,255,255,0.3);border-top-color:#fff;
  border-radius:50%;animation:spin 0.6s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* === RESULT CARDS === */
#adResults{display:flex;flex-direction:column;gap:11px;margin-top:4px}

.ad-card{
  background:var(--surface);
  backdrop-filter:blur(var(--blur));-webkit-backdrop-filter:blur(var(--blur));
  border:1px solid rgba(255,255,255,0.14);
  border-radius:var(--r);padding:14px;position:relative;
  transition:all 0.25s cubic-bezier(0.25,0.8,0.25,1);
}
.ad-card:hover{border-color:rgba(255,255,255,0.22);transform:translateY(-2px)}
.ad-card-enter{animation:cardIn 0.3s ease-out both}
@keyframes cardIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

.ad-card[data-platform="vk"]{border-left:2px solid var(--vk)}
.ad-card[data-platform="yandex"]{border-left:2px solid var(--yandex)}
.ad-card[data-platform="tg"]{border-left:2px solid var(--tg)}

.ad-card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.ad-card-platform{font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.6px}
.ad-card[data-platform="vk"] .ad-card-platform{color:var(--vk)}
.ad-card[data-platform="yandex"] .ad-card-platform{color:var(--yandex)}
.ad-card[data-platform="tg"] .ad-card-platform{color:var(--tg)}

/* Copy button */
.ad-card-copy{
  display:inline-flex;align-items:center;justify-content:center;gap:4px;
  min-width:28px;height:28px;padding:0 10px;
  background:rgba(255,255,255,0.03);border:1px solid var(--border);
  color:var(--text3);font-size:11px;font-weight:500;
  border-radius:var(--r-sm);cursor:pointer;
  transition:all 0.2s ease;
}
.ad-card-copy svg{flex-shrink:0}
.ad-card-copy:hover{background:rgba(255,255,255,0.06);border-color:var(--border-hover);color:var(--text)}
.ad-card-copy:active{transform:translateY(0) scale(0.97);transition-duration:80ms}
.ad-card-copy.copied{border-color:var(--green-border);color:var(--green);background:var(--green-dim);opacity:1}

/* Fields */
.ad-field{margin-bottom:12px}
.ad-field:last-of-type{margin-bottom:0}
.ad-field-label{
  display:flex;align-items:center;gap:6px;
  font-size:10px;color:var(--text3);margin-bottom:5px;font-weight:500;text-transform:uppercase;letter-spacing:.4px;
}
.field-copy-btn{
  display:flex;align-items:center;justify-content:center;
  width:18px;height:18px;padding:0;
  background:none;border:1px solid transparent;border-radius:3px;
  color:var(--text3);cursor:pointer;opacity:0;
  transition:all var(--dur) ease;
}
.ad-field:hover .field-copy-btn{opacity:1}
.field-copy-btn:hover{color:var(--text);background:rgba(255,255,255,0.05);border-color:var(--border)}
.field-copy-btn:active{transform:scale(0.9)}
.field-copy-btn.copied{color:var(--green);opacity:1}

/* Per-field fill-to-form button */
.field-fill-btn{
  display:flex;align-items:center;justify-content:center;
  width:18px;height:18px;padding:0;
  background:none;border:1px solid transparent;border-radius:3px;
  color:var(--text3);cursor:pointer;opacity:0;
  transition:all var(--dur) ease;
}
.ad-field:hover .field-fill-btn{opacity:1}
.field-fill-btn:hover{color:var(--vk);background:var(--vk-dim);border-color:var(--vk-border)}
.field-fill-btn:active{transform:scale(0.9)}
.field-fill-btn.copied{color:var(--green);opacity:1}
.field-fill-btn.error{color:var(--yandex);opacity:1}

/* Form target auto-detect bar */
.form-target-bar{
  display:flex;align-items:center;justify-content:space-between;
  padding:8px 12px;margin-bottom:12px;
  border-radius:var(--r-sm);
  border:1px solid var(--border);
  background:var(--surface);
  backdrop-filter:blur(var(--blur));
  transition:border-color var(--dur) ease;
}
.form-target-bar[data-platform="vk"]{border-color:var(--vk-border);background:var(--vk-dim)}
.form-target-bar[data-platform="yandex"]{border-color:var(--yandex-border);background:var(--yandex-dim)}
.form-target-bar[data-platform="tg"]{border-color:var(--tg-border);background:var(--tg-dim)}
.form-target-label{
  display:flex;align-items:center;gap:6px;
  font-size:11px;font-weight:600;letter-spacing:.3px;
}
.form-target-bar[data-platform="vk"] .form-target-label{color:var(--vk)}
.form-target-bar[data-platform="yandex"] .form-target-label{color:var(--yandex)}
.form-target-bar[data-platform="tg"] .form-target-label{color:var(--tg)}
.form-target-fill-btn{
  display:inline-flex;align-items:center;padding:0 12px;height:26px;
  border:none;color:#fff;font-size:11px;font-weight:600;
  border-radius:var(--r-sm);cursor:pointer;
  transition:all 0.2s ease;
}
.form-target-bar[data-platform="vk"] .form-target-fill-btn{background:var(--vk)}
.form-target-bar[data-platform="yandex"] .form-target-fill-btn{background:var(--yandex)}
.form-target-bar[data-platform="tg"] .form-target-fill-btn{background:var(--tg)}
.form-target-fill-btn:hover{filter:brightness(1.15)}
.form-target-fill-btn:active{transform:scale(0.97)}
.form-target-fill-btn:disabled{opacity:0.5;cursor:not-allowed}
.form-target-fill-btn.success{background:var(--green)!important}
.form-target-fill-btn.error{background:var(--yandex)!important}

.ad-field-text{
  font-size:14px;line-height:1.55;white-space:pre-wrap;word-break:break-word;
  outline:none;border-radius:6px;padding:6px 8px;
  background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.05);
  transition:background var(--dur) ease,box-shadow var(--dur) ease,border-color var(--dur) ease;
}
.ad-field-text:hover{background:rgba(255,255,255,0.03);border-color:rgba(255,255,255,0.08)}
.ad-field-text:focus{background:rgba(255,255,255,0.04);border-color:rgba(108,99,255,0.3);box-shadow:0 0 0 2px var(--accent-dim)}
.ad-field-text:focus-visible{box-shadow:0 0 0 2px var(--accent-dim)}
.ad-char-count{font-size:9px;margin-top:3px;font-weight:500}
.ad-char-count.ok{color:var(--green)}
.ad-char-count.warn{color:var(--yellow)}
.ad-char-count.over{color:var(--yandex)}

.ad-char-bar{height:2px;background:rgba(255,255,255,0.04);border-radius:2px;margin-top:4px;overflow:hidden}
.ad-char-bar-fill{height:100%;border-radius:2px;transition:width 0.3s ease;opacity:0.4}
.ad-char-bar-fill.ok{background:var(--green)}
.ad-char-bar-fill.warn{background:var(--yellow)}
.ad-char-bar-fill.over{background:var(--yandex)}

.ad-meta{display:none}

.ad-error{
  background:rgba(108,99,255,.06);border:1px solid rgba(108,99,255,.20);
  border-radius:var(--r);padding:12px 14px;color:#f87171;font-size:14px;
  animation:fadeIn 0.2s ease-out;
}

.ad-empty{display:none}

/* History navigation */
.ad-history-nav{
  display:flex;align-items:center;gap:8px;
  padding:10px 14px;
  background:var(--surface);
  backdrop-filter:blur(var(--blur));-webkit-backdrop-filter:blur(var(--blur));
  border:1px solid var(--border);
  border-radius:var(--r);font-size:13px;color:var(--text2);
  animation:fadeIn 0.2s ease-out;
}
.icon-btn-sm{
  display:flex;align-items:center;justify-content:center;
  width:28px;height:28px;padding:0;flex-shrink:0;
  background:none;border:1px solid transparent;border-radius:6px;
  color:var(--text3);cursor:pointer;
  transition:all var(--dur) ease;
}
.icon-btn-sm:hover{background:rgba(255,255,255,0.05);color:var(--text2);border-color:var(--border)}
.icon-btn-sm:disabled{opacity:0.2;cursor:default;pointer-events:none}
.icon-btn-sm:active{transform:scale(0.9)}
.icon-btn-sm.del{color:var(--text3)}
.icon-btn-sm.del:hover{color:#f87171;border-color:rgba(248,113,113,0.25)}
.ad-history-pos{font-size:13px;font-weight:600;color:var(--text);white-space:nowrap}
.ad-history-label{
  font-size:12px;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--text3);
  cursor:pointer;border-radius:4px;padding:2px 6px;margin:-2px -6px;
  border:1px solid transparent;transition:all var(--dur) ease;
}
.ad-history-label:hover{color:var(--text2);border-color:var(--border)}
.ad-history-label.editing{
  color:var(--text);background:rgba(255,255,255,0.03);border-color:var(--accent);
  box-shadow:0 0 0 3px var(--accent-dim);
  outline:none;overflow:visible;text-overflow:clip;cursor:text;
}
.ad-history-time{font-size:11px;color:var(--text3);white-space:nowrap}
.history-search-panel{display:grid;grid-template-rows:0fr;transition:grid-template-rows 0.25s ease-out}
.history-search-panel.open{grid-template-rows:1fr}
.history-search-inner{overflow:hidden}
.history-search-panel input{
  width:100%;margin-top:8px;padding:8px 10px;
  background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:6px;
  color:var(--text);font-size:13px;font-family:inherit;
  backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
  transition:border-color var(--dur) ease,box-shadow var(--dur) ease;
}
.history-search-panel input:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-dim)}
.history-search-panel input::placeholder{color:var(--text3)}
.history-search-results{margin-top:4px;display:flex;flex-direction:column;gap:2px}
.history-search-item{
  padding:6px 10px;border-radius:6px;font-size:12px;color:var(--text2);
  cursor:pointer;transition:background 0.15s ease;
  display:flex;justify-content:space-between;align-items:center;
}
.history-search-item:hover{background:rgba(255,255,255,0.04);color:var(--text)}
.history-search-item.active{background:var(--accent-dim);color:var(--text)}
.history-search-item span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.history-search-item .hs-time{color:var(--text3);font-size:11px;flex-shrink:0;margin-left:8px}

.skeleton-card{
  background:var(--surface);border:1px solid var(--border);border-radius:var(--r);padding:14px;
  backdrop-filter:blur(var(--blur));-webkit-backdrop-filter:blur(var(--blur));
}
.skeleton-line{
  height:12px;margin-bottom:8px;border-radius:4px;
  background:linear-gradient(90deg,rgba(255,255,255,0.03) 25%,rgba(255,255,255,0.06) 50%,rgba(255,255,255,0.03) 75%);
  background-size:200% 100%;animation:shimmer 1.5s infinite ease-in-out;
}
.skeleton-line:nth-child(1){width:35%;height:10px;margin-bottom:12px}
.skeleton-line:nth-child(2){width:60%}
.skeleton-line:nth-child(3){width:90%}
.skeleton-line:nth-child(4){width:75%}
.skeleton-line:nth-child(5){width:45%;margin-bottom:0}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}

/* HH URL parser */
.hh-url-row{display:flex;gap:8px;margin-bottom:8px}
.hh-url-row input{
  flex:1;padding:9px 11px;
  background:rgba(255,255,255,0.03);border:1px solid var(--border);
  border-radius:var(--r-sm);color:var(--text);font-size:13px;font-family:inherit;
  backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);
  transition:border-color var(--dur) ease,box-shadow var(--dur) ease;
}
.hh-url-row input:hover{border-color:var(--border-hover)}
.hh-url-row input:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-dim)}
.hh-url-row input::placeholder{color:var(--text3)}
.hh-url-btn{
  padding:8px 14px;
  background:rgba(255,255,255,0.04);border:1px solid var(--border);
  border-radius:var(--r-sm);color:var(--text2);font-size:13px;font-weight:500;
  font-family:inherit;cursor:pointer;white-space:nowrap;
  transition:all var(--dur) ease;position:relative;
}
.hh-url-btn:hover{background:rgba(255,255,255,0.07);color:var(--text);border-color:var(--border-hover)}
.hh-url-btn:disabled{opacity:.4;cursor:not-allowed}
.hh-url-btn.loading{color:transparent;pointer-events:none}
.hh-url-btn.loading::after{content:'';position:absolute;top:50%;left:50%;width:14px;height:14px;margin:-7px 0 0 -7px;border:2px solid rgba(255,255,255,0.3);border-top-color:#fff;border-radius:50%;animation:spin 0.6s linear infinite}
/* Parse current page button */
.parse-page-btn{
  width:100%;padding:9px 14px;
  display:flex;align-items:center;justify-content:center;gap:6px;
  background:rgba(93,216,224,0.05);border:1px solid rgba(93,216,224,0.15);
  border-radius:var(--r-sm);color:var(--tg);font-size:13px;font-weight:500;
  font-family:inherit;cursor:pointer;position:relative;
  transition:all 0.2s cubic-bezier(0.25,0.8,0.25,1);
}
.parse-page-btn:hover{background:rgba(93,216,224,0.09);border-color:rgba(93,216,224,0.3)}
.parse-page-btn:active{transform:translateY(0) scale(0.98);transition-duration:80ms}
.parse-page-btn:disabled{opacity:.4;cursor:not-allowed;transform:none;box-shadow:none}
.parse-page-btn.loading{color:transparent;pointer-events:none}
.parse-page-btn.loading::after{content:'';position:absolute;top:50%;left:50%;width:14px;height:14px;margin:-7px 0 0 -7px;border:2px solid rgba(93,216,224,0.3);border-top-color:var(--tg);border-radius:50%;animation:spin 0.6s linear infinite}
.parse-page-btn svg{flex-shrink:0}
.parse-page-btn.success{border-color:var(--green-border);color:var(--green);background:var(--green-dim)}
.parse-row{display:flex;gap:6px}
.parse-row .parse-page-btn{flex:1}

.parse-normalize-btn{
  display:flex;align-items:center;justify-content:center;gap:5px;
  padding:0 12px;height:34px;flex-shrink:0;
  background:rgba(255,255,255,0.03);border:1px solid var(--border);
  border-radius:var(--r-sm);color:var(--text3);cursor:pointer;
  font-size:11px;font-family:inherit;font-weight:500;white-space:nowrap;
  transition:all 0.2s ease;position:relative;
}
.parse-normalize-btn:hover{background:rgba(74,222,128,0.06);color:var(--green);border-color:var(--green-border)}
.parse-normalize-btn:active{transform:scale(0.97);transition-duration:60ms}
.parse-normalize-btn:disabled{opacity:.4;cursor:not-allowed;transform:none}
.parse-normalize-btn.loading{color:transparent;pointer-events:none}
.parse-normalize-btn.loading::after{content:'';position:absolute;top:50%;left:50%;width:14px;height:14px;margin:-7px 0 0 -7px;border:2px solid rgba(74,222,128,0.3);border-top-color:var(--green);border-radius:50%;animation:spin 0.6s linear infinite}
.parse-normalize-btn.success{color:var(--green);border-color:var(--green-border);background:var(--green-dim)}

.ad-divider{display:flex;align-items:center;gap:10px;margin:4px 0 8px;font-size:9px;color:var(--text3)}
.ad-divider::before,.ad-divider::after{content:'';flex:1;height:1px;background:rgba(255,255,255,0.04)}

/* Per-card variant button */
.ad-card-variant-btn{
  display:inline-flex;align-items:center;padding:0 10px;height:26px;
  background:rgba(255,255,255,0.04);border:1px solid var(--border);
  color:var(--text3);font-size:12px;font-weight:500;
  border-radius:var(--r-sm);cursor:pointer;
  transition:all 0.2s ease;position:relative;white-space:nowrap;
}
.ad-card-variant-btn:hover{background:rgba(255,255,255,0.07);color:var(--text2);border-color:var(--border-hover)}
.ad-card-variant-btn:active{transform:translateY(0) scale(0.97);transition-duration:80ms}
.ad-card-variant-btn:disabled{opacity:.4;cursor:not-allowed}
.ad-card-variant-btn.loading{color:transparent;pointer-events:none}
.ad-card-variant-btn.loading::after{content:'';position:absolute;inset:0;margin:auto;width:12px;height:12px;border:2px solid rgba(255,255,255,0.3);border-top-color:#fff;border-radius:50%;animation:spin 0.6s linear infinite}

/* Variant nav inside card header */
.ad-card-variant-nav{display:inline-flex;align-items:center;gap:2px;margin-left:auto;margin-right:4px}
.ad-card-variant-nav button{
  display:flex;align-items:center;justify-content:center;
  width:22px;height:22px;background:none;border:1px solid transparent;
  border-radius:4px;color:var(--text3);cursor:pointer;font-size:10px;
  transition:all 0.2s ease;padding:0;
}
.ad-card-variant-nav button:hover{background:rgba(255,255,255,0.06);color:var(--text);border-color:var(--border)}
.ad-card-variant-nav button:active{transform:scale(0.9);transition-duration:80ms}
.ad-card-variant-nav button:disabled{opacity:0.2;cursor:default;pointer-events:none}
.vnav-pos{font-size:11px;color:var(--text2);font-weight:600;min-width:20px;text-align:center}

/* Shorten button */
.ad-card-shorten{
  display:inline-flex;align-items:center;gap:4px;padding:0 10px;height:26px;
  background:var(--yandex-dim);border:1px solid var(--yandex-border);
  color:var(--yandex);font-size:12px;font-weight:500;
  border-radius:var(--r-sm);cursor:pointer;
  transition:all 0.2s ease;position:relative;
}
.ad-card-shorten:hover{background:rgba(252,63,29,0.14);border-color:rgba(252,63,29,0.4)}
.ad-card-shorten:active{transform:translateY(0) scale(0.97);transition-duration:80ms}
.ad-card-shorten:disabled{opacity:.4;cursor:not-allowed}
.ad-card-shorten.loading{color:transparent;pointer-events:none}
.ad-card-shorten.loading::after{content:'';position:absolute;inset:0;margin:auto;width:12px;height:12px;border:2px solid rgba(252,63,29,0.3);border-top-color:var(--yandex);border-radius:50%;animation:spin 0.6s linear infinite}

/* System prompt editor */
.prompt-editor{margin-top:10px;border-top:1px solid rgba(255,255,255,0.04);padding-top:10px}
.prompt-editor summary{font-size:9px;color:var(--text3);cursor:pointer;user-select:none;list-style:none;display:flex;align-items:center;gap:4px}
.prompt-editor summary::-webkit-details-marker{display:none}
.prompt-editor summary::before{content:'\25B6';font-size:8px;transition:transform 0.2s ease;display:inline-block}
.prompt-editor[open] summary::before{transform:rotate(90deg)}
.prompt-editor textarea{
  width:100%;min-height:100px;max-height:200px;margin-top:8px;padding:8px 10px;
  background:rgba(255,255,255,0.02);border:1px solid var(--border);
  border-radius:6px;color:var(--text);font-size:10px;
  font-family:'SF Mono',Monaco,Consolas,monospace;line-height:1.4;resize:vertical;
  transition:border-color var(--dur) ease,box-shadow var(--dur) ease;
}
.prompt-editor textarea:focus{border-color:var(--accent);box-shadow:0 0 0 3px var(--accent-dim)}
.prompt-editor-actions{display:flex;gap:6px;margin-top:6px}
.prompt-editor-actions button{
  padding:4px 10px;font-size:9px;font-weight:500;font-family:inherit;
  border-radius:6px;cursor:pointer;transition:all var(--dur) ease;
}
.prompt-reset-btn{background:none;border:1px solid var(--border);color:var(--text3)}
.prompt-reset-btn:hover{border-color:var(--border-hover);color:var(--text2)}
.prompt-save-btn{background:var(--accent-dim);border:1px solid var(--accent-border);color:var(--accent)}
.prompt-save-btn:hover{background:rgba(108,99,255,0.15)}

/* Smooth state transitions */
.cb-pill,.icon-btn,.icon-btn-sm,.hh-url-btn,.ad-card-copy,.ad-card-shorten{
  transition-property:background-color,border-color,color,box-shadow,transform,opacity;
  transition-duration:0.2s;transition-timing-function:ease;
}

@media(prefers-reduced-motion:reduce){
  *,*::before,*::after{
    animation-duration:0.01ms !important;
    animation-iteration-count:1 !important;
    transition-duration:0.01ms !important;
  }
}
